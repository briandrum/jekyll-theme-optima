---
layout: default
---

{%- assign search_domain = site.url | remove: "http://" -%}

<script>

function removeElementAttr(id, val) {
  document.getElementById(id).removeAttribute(val);
}

function setElementDisabled(id, val) {
  document.getElementById(id).disabled = val;
}

function focusFormElement(id) {
  document.getElementById(id).focus();
}

function readySearchForm() {
  removeElementAttr("search-input", "value");
  setElementDisabled("search-input", true);
  setElementDisabled("search-clear", true);
  setElementDisabled("search-submit", true);
  updateSearchResults("search-results", "<div class=\"BlankSlate\">Preparing search index…</div>");
}

function resetSearchForm() {
  resetSearchResults();
  focusFormElement("search-input");
}

function updateSearchResults(id, html) {
  document.getElementById(id).innerHTML = html;
}

function resetSearchResults() {
  updateSearchResults("search-results", "<ol class=\"SearchResults\"></ol>");
}

var documents, idx;

async function searchDocuments() {
  let response = await fetch("{{ "/search.json" | relative_url }}")
  documents = await response.json()

  setElementDisabled("search-input", false)
  setElementDisabled("search-clear", false)
  setElementDisabled("search-submit", false)

  resetSearchForm();

  idx = lunr(function () {
    this.ref("id")
    this.field("title")
    this.field("body")

    documents.forEach(function (doc) {
      this.add(doc)
    }, this)
  });
}

searchDocuments();

function lunr_search(term) {
  resetSearchResults();

  if(term) {
    var results = idx.search(term);
    if(results.length>0){
      for (var i = 0; i < results.length; i++) {
        // more statements
        var ref = results[i]["ref"];
        var href = ("fragmentDirective" in document ? documents[ref]["url"] + "#:~:text=" + encodeURIComponent(term) : documents[ref]["url"]);
        var url = documents[ref]["url"].split("/").slice(3,-1).join(" › ");
        var title = documents[ref]["title"];
        var body = documents[ref]["body"].substring(0,320) + "…";
        document.querySelectorAll("#search-results ol.SearchResults")[0].innerHTML = document.querySelectorAll("#search-results ol.SearchResults")[0].innerHTML + "<li class=\"SearchResults-result\"><a class=\"SearchResults-link u-linkComplex\" href=\"" + href + "\"><address class=\"SearchResults-url\">" + url + "</address><h4 class=\"SearchResults-title u-linkComplexTarget\">" + title + "</h4><p class=\"SearchResults-description\">" + body + "</p></a></li>";
      }
    } else {
      updateSearchResults("search-results", "<div class=\"BlankSlate\">No matches found.</div>");
    }
  }
  focusFormElement("search-submit");;
  return false;
}

</script>

<div class="Grid Grid--withGutter">
  <div class="Grid-cell u-sizeFull u-sizeFull u-md-size3of4 u-lg-size3of4">
    <div class="u-spaceStackLarge">
      <form action="https://html.duckduckgo.com/html" method="get" onsubmit="return lunr_search(document.getElementById('search-input').value);">
        <div class="InputGroup u-flex u-flexAlignItemsStretch u-flexJustifyContentStretch">
          <input autofocus class="TextInput u-size1of2" enterkeyhint="search" id="search-input" maxlength="255" name="q" placeholder="example: bicycle" type="search" value="site:{{ search_domain }} ">
          <button class="Button" id="search-clear" type="reset" onclick="resetSearchForm()">Clear</button>
          <button class="Button" id="search-submit" type="submit">Search</button>
        </div>
      </form>
      <div id="search-results">
        <div class="BlankSlate">
          <noscript>
            <p>Enter your search terms above after <kbd class="Kbd">site:{{ search_domain }}</kbd></p>
          </noscript>
        </div>
      </div>
    </div>
  </div>
  <div class="Grid-cell u-sizeFull u-sizeFull u-md-size1of4 u-lg-size1of4">
    <div class="u-spaceStackLarge">
      {%- assign content = content | strip_newlines -%}
      {%- unless content == "" -%}
        <aside class="Aside">
          <div class="Markdown">
            {{ content }}
          </div>
        </aside>
      {%- endunless -%}
      <details class="Aside Details">
        <summary class="Details-summary">Help</summary>
        <div class="Details-details">
          <dl class="DescriptionList">
            <dt class="DescriptionList-term">Starts with</dt>
            <dd class="DescriptionList-description">
              <p>Return only pages containing words that start with “foo”, like “food” or “foolish”: <kbd class="Kbd">foo*</kbd></p>
            </dd>
            <dt class="DescriptionList-term">Field</dt>
            <dd class="DescriptionList-description">
              <p>Return only pages whose title contains “foo”: <kbd class="Kbd">title:foo</kbd></p>
            </dd>
            <dd class="DescriptionList-description">
              <p>Return only pages whose body contains “baz”: <kbd class="Kbd">body:baz</kbd></p>
            </dd>
            <dt class="DescriptionList-term">Term presence</dt>
            <dd class="DescriptionList-description">
              <p>Return only pages that contain “foo” and optionally “bar”, but do not contain “baz”: <kbd class="Kbd">+foo bar -baz</kbd></p>
            </dd>
            <dd class="DescriptionList-description">
              <p>Return only pages that contain both “foo” and “bar”: <kbd class="Kbd">+foo +bar</kbd></p>
            </dd>
            <dt class="DescriptionList-term">Fuzzy matching</dt>
            <dd class="DescriptionList-description">
              <p>Return only pages that contain words similar to “foo”, like “fob” and “zoo”: <kbd class="Kbd">foo~1</kbd></p>
            </dd>
            <dt class="DescriptionList-term">Boost</dt>
            <dd class="DescriptionList-description">
              <p>Return: <kbd class="Kbd">foo^10 bar^5 baz</kbd></p>
            </dd>
          </dl>
        </div>
      </details>
    </div>
  </div>
</div>
<script>
  readySearchForm();
</script>
